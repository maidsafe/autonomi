# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [0.8.6](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.8.5...sn_protocol-v0.8.6) - 2023-10-26

### Added
- replicate Spend/Register with same key but different content

## [0.8.5](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.8.4...sn_protocol-v0.8.5) - 2023-10-26

### Other
- updated the following local packages: sn_registers, sn_transfers

## [0.8.4](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.8.3...sn_protocol-v0.8.4) - 2023-10-26

### Other
- pass RecordKey by reference

## [0.8.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.8.2...sn_protocol-v0.8.3) - 2023-10-24

### Other
- updated the following local packages: sn_transfers

## [0.8.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.8.1...sn_protocol-v0.8.2) - 2023-10-24

### Added
- *(payments)* network royalties payment made when storing content

### Fixed
- *(node)* include network royalties in received fee calculation

## [0.8.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.8.0...sn_protocol-v0.8.1) - 2023-10-24

### Other
- updated the following local packages: sn_transfers

## [0.8.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.28...sn_protocol-v0.8.0) - 2023-10-24

### Added
- *(protocol)* remove allocation inside `PrettyPrintRecordKey::Display`
- *(protocol)* [**breaking**] implement `PrettyPrintRecordKey` as a `Cow` type

### Fixed
- *(protocol)* use custom `Display` for `PrettyPrintKBucketKey`

## [0.7.28](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.27...sn_protocol-v0.7.28) - 2023-10-23

### Fixed
- *(protocol)* add custom debug fmt for QueryResponse

### Other
- more custom debug and debug skips

## [0.7.27](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.26...sn_protocol-v0.7.27) - 2023-10-22

### Added
- *(protocol)* Nodes can error StoreCosts if they have data.

## [0.7.26](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.25...sn_protocol-v0.7.26) - 2023-10-20

### Added
- log network address with KBucketKey

## [0.7.25](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.24...sn_protocol-v0.7.25) - 2023-10-20

### Other
- print the PeerId along with the raw bytes

## [0.7.24](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.23...sn_protocol-v0.7.24) - 2023-10-18

### Other
- updated the following local packages: sn_transfers

## [0.7.23](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.22...sn_protocol-v0.7.23) - 2023-10-18

### Other
- updated the following local packages: sn_transfers

## [0.7.22](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.21...sn_protocol-v0.7.22) - 2023-10-17

### Other
- updated the following local packages: sn_transfers

## [0.7.21](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.20...sn_protocol-v0.7.21) - 2023-10-13

### Fixed
- *(network)* check `RecordHeader` during chunk early completion

## [0.7.20](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.19...sn_protocol-v0.7.20) - 2023-10-12

### Other
- updated the following local packages: sn_transfers

## [0.7.19](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.18...sn_protocol-v0.7.19) - 2023-10-11

### Other
- updated the following local packages: sn_transfers

## [0.7.18](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.17...sn_protocol-v0.7.18) - 2023-10-10

### Other
- updated the following local packages: sn_transfers

## [0.7.17](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.16...sn_protocol-v0.7.17) - 2023-10-10

### Other
- updated the following local packages: sn_registers

## [0.7.16](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.15...sn_protocol-v0.7.16) - 2023-10-10

### Other
- updated the following local packages: sn_transfers

## [0.7.15](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.14...sn_protocol-v0.7.15) - 2023-10-06

### Other
- updated the following local packages: sn_transfers

## [0.7.14](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.13...sn_protocol-v0.7.14) - 2023-10-06

### Other
- updated the following local packages: sn_transfers

## [0.7.13](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.12...sn_protocol-v0.7.13) - 2023-10-05

### Other
- updated the following local packages: sn_transfers

## [0.7.12](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.11...sn_protocol-v0.7.12) - 2023-10-05

### Other
- updated the following local packages: sn_transfers

## [0.7.11](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.10...sn_protocol-v0.7.11) - 2023-10-05

### Other
- updated the following local packages: sn_transfers

## [0.7.10](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.9...sn_protocol-v0.7.10) - 2023-10-05

### Other
- updated the following local packages: sn_transfers

## [0.7.9](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.8...sn_protocol-v0.7.9) - 2023-10-04

### Other
- updated the following local packages: sn_registers

## [0.7.8](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.7...sn_protocol-v0.7.8) - 2023-10-04

### Other
- updated the following local packages: sn_transfers

## [0.7.7](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.6...sn_protocol-v0.7.7) - 2023-10-02

### Other
- updated the following local packages: sn_transfers

## [0.7.6](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.5...sn_protocol-v0.7.6) - 2023-09-29

### Added
- replicate fetch from peer first then from network

## [0.7.5](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.4...sn_protocol-v0.7.5) - 2023-09-28

### Other
- updated the following local packages: sn_transfers

## [0.7.4](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.3...sn_protocol-v0.7.4) - 2023-09-27

### Other
- updated the following local packages: sn_transfers

## [0.7.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.2...sn_protocol-v0.7.3) - 2023-09-25

### Other
- updated the following local packages: sn_transfers

## [0.7.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.1...sn_protocol-v0.7.2) - 2023-09-25

### Other
- updated the following local packages: sn_transfers

## [0.7.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.7.0...sn_protocol-v0.7.1) - 2023-09-22

### Other
- *(gossipsub)* CI testing with nodes subscribing to gossipsub topics and publishing messages

## [0.7.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.10...sn_protocol-v0.7.0) - 2023-09-21

### Added
- dusking DBCs

### Other
- remove dbc dust comments
- rename Nano NanoTokens

## [0.6.10](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.9...sn_protocol-v0.6.10) - 2023-09-18

### Added
- generic transfer receipt

## [0.6.9](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.8...sn_protocol-v0.6.9) - 2023-09-14

### Other
- remove unused error variants

## [0.6.8](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.7...sn_protocol-v0.6.8) - 2023-09-13

### Added
- *(register)* paying nodes for Register storage

## [0.6.7](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.6...sn_protocol-v0.6.7) - 2023-09-12

### Added
- add tx and parent spends verification
- chunk payments using UTXOs instead of DBCs

### Other
- use updated sn_dbc

## [0.6.6](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.5...sn_protocol-v0.6.6) - 2023-09-11

### Other
- updated the following local packages: sn_registers

## [0.6.5](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.4...sn_protocol-v0.6.5) - 2023-09-05

### Other
- updated the following local packages: sn_registers

## [0.6.4](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.3...sn_protocol-v0.6.4) - 2023-09-04

### Added
- feat!(protocol): make payments for all record types

### Other
- *(release)* sn_registers-v0.2.4
- add RegisterWithSpend header validation
- se/derialize for PrettyPrintRecordKey

## [0.6.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.2...sn_protocol-v0.6.3) - 2023-09-04

### Other
- Add client and protocol detail

## [0.6.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.1...sn_protocol-v0.6.2) - 2023-08-31

### Added
- *(node)* node to store rewards in a local wallet

## [0.6.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.6.0...sn_protocol-v0.6.1) - 2023-08-31

### Added
- fetch from network during network

## [0.6.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.5.3...sn_protocol-v0.6.0) - 2023-08-30

### Added
- *(protocol)* add logs for `RecordHeader` serde
- one transfer per data set, mapped dbcs to content addrs
- [**breaking**] pay each chunk holder direct
- feat!(protocol): gets keys with GetStoreCost
- feat!(protocol): get price and pay for each chunk individually
- feat!(protocol): remove chunk merkletree to simplify payment

### Fixed
- *(protocol)* avoid panics

### Other
- *(node)* data verification test refactors for readability
- *(node)* only store paid for data, ignore maj
- *(node)* clarify payment errors
- *(node)* reenable payment fail check

## [0.5.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.5.2...sn_protocol-v0.5.3) - 2023-08-24

### Other
- updated the following local packages: sn_registers

## [0.5.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.5.1...sn_protocol-v0.5.2) - 2023-08-18

### Added
- UTXO and Transfer

## [0.5.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.5.0...sn_protocol-v0.5.1) - 2023-08-10

### Fixed
- *(test)* have multiple verification attempts

## [0.5.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.6...sn_protocol-v0.5.0) - 2023-08-08

### Added
- *(node)* validate payments on kad:put

## [0.4.6](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.5...sn_protocol-v0.4.6) - 2023-08-08

### Added
- *(networking)* remove sign over store cost

## [0.4.5](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.4...sn_protocol-v0.4.5) - 2023-08-07

### Added
- rework register addresses to include pk

### Other
- rename network addresses confusing name method to xorname

## [0.4.4](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.3...sn_protocol-v0.4.4) - 2023-08-01

### Other
- updated the following local packages: sn_registers

## [0.4.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.2...sn_protocol-v0.4.3) - 2023-08-01

### Other
- cleanup old dead API

## [0.4.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.1...sn_protocol-v0.4.2) - 2023-08-01

### Other
- updated the following local packages: sn_registers

## [0.4.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.4.0...sn_protocol-v0.4.1) - 2023-07-31

### Other
- move PrettyPrintRecordKey to sn_protocol

## [0.4.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.3.2...sn_protocol-v0.4.0) - 2023-07-28

### Added
- *(protocol)* Add GetStoreCost Query and QueryResponse

### Other
- remove duplicate the thes

## [0.3.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.3.1...sn_protocol-v0.3.2) - 2023-07-26

### Fixed
- *(register)* Registers with same name but different tags were not being stored by the network

### Other
- centralising RecordKey creation logic to make sure we always use the same for all content type

## [0.3.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.3.0...sn_protocol-v0.3.1) - 2023-07-25

### Added
- *(replication)* replicate when our close group changes

## [0.3.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.10...sn_protocol-v0.3.0) - 2023-07-21

### Added
- *(node)* fee output of payment proof to be required before storing chunks
- *(protocol)* [**breaking**] make Chunks storage payment required

## [0.2.10](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.9...sn_protocol-v0.2.10) - 2023-07-20

### Other
- cleanup error types

## [0.2.9](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.8...sn_protocol-v0.2.9) - 2023-07-19

### Added
- using kad::record for dbc spend ops

## [0.2.8](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.7...sn_protocol-v0.2.8) - 2023-07-19

### Other
- remove un-used Query::GetRegister

## [0.2.7](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.6...sn_protocol-v0.2.7) - 2023-07-18

### Added
- safer registers requiring signatures

### Fixed
- address PR comments

## [0.2.6](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.5...sn_protocol-v0.2.6) - 2023-07-17

### Added
- *(networking)* upgrade to libp2p 0.52.0

### Other
- add missing cargo publish dry run for top level crates

## [0.2.5](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.4...sn_protocol-v0.2.5) - 2023-07-12

### Other
- client to upload paid chunks in batches

## [0.2.4](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.3...sn_protocol-v0.2.4) - 2023-07-11

### Other
- logging detailed NetworkAddress

## [0.2.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.2...sn_protocol-v0.2.3) - 2023-07-10

### Added
- client query register via get_record
- client upload Register via put_record

## [0.2.2](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.1...sn_protocol-v0.2.2) - 2023-07-06

### Added
- client upload chunk using kad::put_record

## [0.2.1](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.2.0...sn_protocol-v0.2.1) - 2023-07-05

### Added
- carry out validation for record_store::put

## [0.2.0](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.11...sn_protocol-v0.2.0) - 2023-07-05

### Added
- [**breaking**] send the list of spent dbc ids instead of whole tx within payment proof
- check fee output id when spending inputs and check paid fee amount when storing Chunks

### Other
- adapting codebase to new sn_dbc

## [0.1.11](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.10...sn_protocol-v0.1.11) - 2023-07-04

### Other
- demystify permissions

## [0.1.10](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.9...sn_protocol-v0.1.10) - 2023-06-28

### Added
- rework permissions, implement register cmd handlers
- register refactor, kad reg without cmds

### Fixed
- rename UserRights to UserPermissions

## [0.1.9](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.8...sn_protocol-v0.1.9) - 2023-06-21

### Added
- *(node)* trigger replication when inactivity

## [0.1.8](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.7...sn_protocol-v0.1.8) - 2023-06-21

### Fixed
- *(protocol)* remove unsafe indexing

### Other
- remove unused error variants
- *(node)* obtain parent_tx from SignedSpend

## [0.1.7](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.6...sn_protocol-v0.1.7) - 2023-06-20

### Added
- *(network)* validate `Record` on GET
- *(network)* validate and store `ReplicatedData`
- *(node)* perform proper validations on PUT
- *(network)* store `Chunk` along with `PaymentProof`
- *(kad)* impl `RecordHeader` to store the record kind

### Fixed
- *(record_header)* encode unit enum as u32
- *(node)* store parent tx along with `SignedSpend`
- *(network)* use `rmp_serde` for `RecordHeader` ser/de

### Other
- *(docs)* add more docs and comments

## [0.1.6](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.5...sn_protocol-v0.1.6) - 2023-06-20

### Added
- nodes to verify input DBCs of Chunk payment proof were spent

### Other
- specific error types for different payment proof verification scenarios
- include the Tx instead of output DBCs as part of storage payment proofs

## [0.1.5](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.4...sn_protocol-v0.1.5) - 2023-06-15

### Added
- add double spend test

### Fixed
- parent spend checks
- parent spend issue

## [0.1.4](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.3...sn_protocol-v0.1.4) - 2023-06-14

### Added
- include output DBC within payment proof for Chunks storage

## [0.1.3](https://github.com/maidsafe/safe_network/compare/sn_protocol-v0.1.2...sn_protocol-v0.1.3) - 2023-06-09

### Fixed
- *(replication)* prevent dropped conns during replication

### Other
- manually change crate version
- Revert "chore(release): sn_cli-v0.77.1/sn_client-v0.85.2/sn_networking-v0.1.2/sn_protocol-v0.1.2/sn_node-v0.83.1/sn_record_store-v0.1.2/sn_registers-v0.1.2"

## [0.1.1](https://github.com/jacderida/safe_network/compare/sn_protocol-v0.1.0...sn_protocol-v0.1.1) - 2023-06-06

### Added
- refactor replication flow to using pull model

## [0.1.0](https://github.com/jacderida/safe_network/releases/tag/sn_protocol-v0.1.0) - 2023-06-04

### Added
- store double spends when we detect them
- record based DBC Spends

### Fixed
- remove unused deps, fix doc comment

### Other
- bump sn_dbc version to 19 for simpler signedspend debug
- accommodate new workspace
- extract new sn_protocol crate
